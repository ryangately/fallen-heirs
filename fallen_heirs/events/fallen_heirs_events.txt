# Fallen Heirs events
namespace = fallenheir

# Heir to the Empire ascension perk
# Convert empire ethics and apply negative modifier
country_event = {
	id = fallenheir.1
	title = "fallenheir.1.name"
	desc = "fallenheir.1.desc"
	picture = GFX_evt_galactic_senate
	show_sound = event_administrative_work
	
	is_triggered_only = yes
	
	immediate = {
		every_country = {
			limit = { 
				is_ai = no
				has_communications = root
				NOT = { is_same_value = root }
			}
			country_event = { id = fallenheir.02 }
		}
		#change_dominant_species = { species = last_created change_all = yes }
	}
	
	option = {
		name = "fallenheir.1.a"
		trigger = {
			Or = {
				has_ethic = ethic_fanatic_spiritualist
				has_ethic = ethic_spiritualist
			}
		}
		tooltip = {
			modify_species = {
				species = this
				add_trait = trait_latent_psionic
			}
		}
		clear_ethos = yes
		country_add_ethic = ethic_fanatic_spiritualist
		every_owned_pop = {
			limit = {
				is_same_species = root
				NOT = { species = { has_trait = trait_latent_psionic } }
			}
			modify_species = {
				species = this
				add_trait = trait_latent_psionic
			}
			pop_change_ethic = ethic_spiritualist
		}
	}
	option = {
		name = "fallenheir.1.b"
		trigger = {
			Or = {
				has_ethic = ethic_fanatic_materialist
				has_ethic = ethic_materialist
			}
		}
		tooltip = {
			modify_species = {
				species = this
				add_trait = trait_cybernetic
			}
		}
		clear_ethos = yes
		country_add_ethic = ethic_fanatic_materialist
		every_owned_pop = {
			limit = {
				is_same_species = root
				NOT = { species = { has_trait = trait_cybernetic } }
			}
			modify_species = {
				species = this
				add_trait = trait_cybernetic
			}
			pop_change_ethic = ethic_materialist
		}
	}
}

# Notification for other empires
country_event = {
	id = fallenheir.2
	title = "fallenheir.2.name"
	desc = {
		text = fallenheir.2.1.desc
		trigger = {
			NOR = {
				any_owned_pop = { is_same_species = from }
				any_owned_leader = { is_same_species = from }
			}
		}
	}
	desc = {
		text = fallenheir.2.2.desc
		trigger = {
			OR = {
				any_owned_pop = { is_same_species = from }
				any_owned_leader = { is_same_species = from }
			}
		}
	}
	picture = GFX_evt_galactic_senate
	show_sound = event_administrative_work
	location = from.capital_scope
	
	is_triggered_only = yes
	
	option = {
		name = "fallenheir.2.a"
		trigger = {
			NOT = { has_civic = civic_fallen_heir }
		}
	}
	option = {
		name = "fallenheir.2.b"
		trigger = {
			has_civic = civic_fallen_heir
		}
	}
	option = {
		name = "fallenheir.2.c"
		trigger = {
			has_ascension_perk = ap_heir_to_the_empire
		}
	}
}